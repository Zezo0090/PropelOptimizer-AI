<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RedSeaPropel-AI - Ø§Ù„ØªÙˆØ£Ù… Ø§Ù„Ø±Ù‚Ù…ÙŠ Ø§Ù„Ø°ÙƒÙŠ</title>
    <style>
        :root {
            --navy-dark: #0f172a;
            --navy-medium: #1e293b;
            --cyan-bright: #38bdf8;
            --cyan-dark: #0284c7;
            --orange: #f59e0b;
            --green: #22c55e;
            --text-light: #f1f5f9;
            --text-secondary: #cbd5e1;
            --glass-bg: rgba(255,255,255,0.08);
            --border-color: rgba(56,189,248,0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Arial', sans-serif;
            background: linear-gradient(135deg, var(--navy-dark) 0%, var(--navy-medium) 50%, #1a365d 100%);
            color: var(--text-light);
            min-height: 100vh;
            padding: 20px;
            direction: rtl;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 20px;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid var(--border-color);
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 15px;
            background: linear-gradient(135deg, var(--cyan-bright), #0ea5e9);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header .subtitle-ar {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: var(--text-light);
        }

        .header .subtitle-en {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 10px;
        }

        .header .tagline {
            font-size: 0.95rem;
            color: var(--text-secondary);
            font-style: italic;
        }

        /* Main Grid */
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        @media (max-width: 1024px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Cards */
        .card {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            border: 1px solid var(--border-color);
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(56,189,248,0.2);
        }

        .card-title {
            font-size: 1.8rem;
            margin-bottom: 25px;
            color: var(--cyan-bright);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Input Controls */
        .input-group {
            margin-bottom: 25px;
        }

        .input-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 1rem;
            color: var(--text-light);
        }

        .input-value {
            color: var(--cyan-bright);
            font-weight: bold;
        }

        .slider {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: var(--navy-medium);
            outline: none;
            -webkit-appearance: none;
            border: 1px solid var(--border-color);
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--cyan-bright);
            cursor: pointer;
            box-shadow: 0 0 10px rgba(56,189,248,0.5);
            transition: transform 0.2s ease;
        }

        .slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }

        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--cyan-bright);
            cursor: pointer;
            border: none;
            box-shadow: 0 0 10px rgba(56,189,248,0.5);
        }

        /* Button */
        .btn-primary {
            width: 100%;
            padding: 18px;
            font-size: 1.3rem;
            font-weight: bold;
            border: none;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--cyan-bright), var(--cyan-dark));
            color: var(--navy-dark);
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(56,189,248,0.4);
            margin-top: 10px;
        }

        .btn-primary:hover {
            transform: scale(1.02);
            box-shadow: 0 6px 20px rgba(56,189,248,0.6);
        }

        .btn-primary:active {
            transform: scale(0.98);
        }

        .btn-primary.loading {
            opacity: 0.7;
            cursor: wait;
        }

        /* Results Panel */
        .results-hidden {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
        }

        .results-visible {
            opacity: 1;
            transform: translateY(0);
        }

        .recommendation-badge {
            text-align: center;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 25px;
            background: linear-gradient(135deg, rgba(56,189,248,0.2), rgba(2,132,199,0.2));
            border: 2px solid var(--cyan-bright);
            animation: fadeInScale 0.5s ease;
        }

        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .recommendation-badge h3 {
            font-size: 2rem;
            margin-bottom: 8px;
            color: var(--cyan-bright);
        }

        .recommendation-badge p {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* Metrics */
        .metrics-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-bottom: 30px;
        }

        .metric-item {
            display: flex;
            justify-content: space-between;
            padding: 15px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            border-right: 3px solid var(--cyan-bright);
        }

        .metric-label {
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        .metric-value {
            color: var(--cyan-bright);
            font-weight: bold;
            font-size: 1.1rem;
        }

        /* Chart Container */
        .chart-container {
            position: relative;
            height: 300px;
            margin-bottom: 30px;
        }

        /* Efficiency Bars */
        .efficiency-section {
            margin-top: 25px;
        }

        .efficiency-item {
            margin-bottom: 15px;
        }

        .efficiency-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .efficiency-bar {
            width: 100%;
            height: 12px;
            background: var(--navy-medium);
            border-radius: 6px;
            overflow: hidden;
            border: 1px solid var(--border-color);
        }

        .efficiency-fill {
            height: 100%;
            background: linear-gradient(90deg, #ef4444, #f59e0b, var(--green));
            transition: width 0.5s ease;
            border-radius: 6px;
        }

        /* Quick Scenarios */
        .scenarios-section {
            margin-top: 40px;
        }

        .scenarios-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .scenario-btn {
            padding: 15px 20px;
            background: var(--glass-bg);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            color: var(--text-light);
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .scenario-btn:hover {
            background: rgba(56,189,248,0.2);
            border-color: var(--cyan-bright);
            transform: translateY(-2px);
        }

        /* Info Cards */
        .info-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .info-card {
            background: var(--glass-bg);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .info-card:hover {
            border-color: var(--cyan-bright);
            box-shadow: 0 4px 20px rgba(56,189,248,0.2);
        }

        .info-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .info-card-title {
            font-size: 1.2rem;
            color: var(--cyan-bright);
        }

        .info-card-content {
            color: var(--text-secondary);
            line-height: 1.6;
            font-size: 0.95rem;
        }

        .info-card-content.collapsed {
            display: none;
        }

        .toggle-icon {
            transition: transform 0.3s ease;
        }

        .toggle-icon.expanded {
            transform: rotate(180deg);
        }

        /* Loading Spinner */
        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .hidden {
            display: none;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            .header .subtitle-ar {
                font-size: 1.2rem;
            }
            .card-title {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>ğŸš¢ RedSeaPropel-AI</h1>
            <p class="subtitle-ar">Ø§Ù„ØªÙˆØ£Ù… Ø§Ù„Ø±Ù‚Ù…ÙŠ Ø§Ù„Ø°ÙƒÙŠ Ù„ØªØ­Ø³ÙŠÙ† ÙƒÙØ§Ø¡Ø© Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ù‡Ø¬ÙŠÙ† ÙÙŠ Ø§Ù„Ø¨Ø­Ø± Ø§Ù„Ø£Ø­Ù…Ø±</p>
            <p class="subtitle-en">AI-Powered Digital Twin for Hybrid Propulsion Optimization</p>
            <p class="tagline">ØªØ­Ø³ÙŠÙ† Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ Ø§Ù„ÙˆÙ‚ÙˆØ¯ ÙˆØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø§Ù†Ø¨Ø¹Ø§Ø«Ø§Øª Ù„Ù„Ø³ÙÙ† Ø§Ù„Ø¹Ø§Ù…Ù„Ø© ÙÙŠ Ø§Ù„Ø¨Ø­Ø± Ø§Ù„Ø£Ø­Ù…Ø±</p>
        </header>

        <!-- Main Grid -->
        <div class="main-grid">
            <!-- Input Control Panel -->
            <div class="card">
                <h2 class="card-title">âš™ï¸ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„ØªØ´ØºÙŠÙ„</h2>
                
                <div class="input-group">
                    <div class="input-label">
                        <span>Ø§Ù„Ø³Ø±Ø¹Ø© (Speed)</span>
                        <span class="input-value" id="speedValue">17 Ø¹Ù‚Ø¯Ø©</span>
                    </div>
                    <input type="range" class="slider" id="speed" min="10" max="20" step="0.5" value="17">
                </div>

                <div class="input-group">
                    <div class="input-label">
                        <span>Ø­Ø§Ù„Ø© Ø§Ù„Ø¨Ø­Ø± (Sea State)</span>
                        <span class="input-value" id="seaStateValue">4 - Moderate</span>
                    </div>
                    <input type="range" class="slider" id="seaState" min="1" max="7" step="1" value="4">
                </div>

                <div class="input-group">
                    <div class="input-label">
                        <span>Ø§Ù„Ø­Ù…ÙˆÙ„Ø© (Cargo Load)</span>
                        <span class="input-value" id="cargoValue">75%</span>
                    </div>
                    <input type="range" class="slider" id="cargo" min="0" max="100" step="25" value="75">
                </div>

                <div class="input-group">
                    <div class="input-label">
                        <span>Ø³Ø±Ø¹Ø© Ø§Ù„Ø±ÙŠØ§Ø­ (Wind Speed)</span>
                        <span class="input-value" id="windValue">8 Ù…/Ø«</span>
                    </div>
                    <input type="range" class="slider" id="wind" min="0" max="20" step="1" value="8">
                </div>

                <div class="input-group">
                    <div class="input-label">
                        <span>Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø£Ù…ÙˆØ§Ø¬ (Wave Height)</span>
                        <span class="input-value" id="waveValue">1.5 Ù…ØªØ±</span>
                    </div>
                    <input type="range" class="slider" id="wave" min="0" max="5" step="0.5" value="1.5">
                </div>

                <div class="input-group">
                    <div class="input-label">
                        <span>Ø´Ø­Ù† Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ© (Battery SOC)</span>
                        <span class="input-value" id="batteryValue">50%</span>
                    </div>
                    <input type="range" class="slider" id="battery" min="20" max="90" step="10" value="50">
                </div>

                <button class="btn-primary" id="calculateBtn">
                    ğŸ¤– Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªÙˆØµÙŠØ© Ø§Ù„Ø°ÙƒÙŠØ©
                </button>
            </div>

            <!-- Results Panel -->
            <div class="card">
                <h2 class="card-title">ğŸ“Š Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙˆØ§Ù„ØªÙˆØµÙŠØ§Øª</h2>
                
                <div id="resultsPanel" class="results-hidden">
                    <!-- Recommendation Badge -->
                    <div class="recommendation-badge">
                        <h3 id="recommendationMode">Hybrid 50-50</h3>
                        <p id="recommendationModeAr">Ù‡Ø¬ÙŠÙ† 50-50</p>
                    </div>

                    <!-- Metrics -->
                    <div class="metrics-grid">
                        <div class="metric-item">
                            <span class="metric-label">Ø§Ù„Ù‚Ø¯Ø±Ø© Ø§Ù„ÙƒÙ„ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©</span>
                            <span class="metric-value" id="totalPower">8000 kW</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-label">Ù‚Ø¯Ø±Ø© Ø§Ù„Ø¯ÙŠØ²Ù„</span>
                            <span class="metric-value" id="dieselPower">4000 kW</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-label">Ø§Ù„Ù‚Ø¯Ø±Ø© Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©</span>
                            <span class="metric-value" id="electricPower">4000 kW</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-label">Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ Ø§Ù„ÙˆÙ‚ÙˆØ¯</span>
                            <span class="metric-value" id="fuelConsumption">0.74 Ø·Ù†/Ø³Ø§Ø¹Ø©</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-label">Ù†Ø³Ø¨Ø© Ø§Ù„Ø¯ÙŠØ²Ù„</span>
                            <span class="metric-value" id="dieselPercent">50%</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-label">Ù†Ø³Ø¨Ø© Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡</span>
                            <span class="metric-value" id="electricPercent">50%</span>
                        </div>
                    </div>

                    <!-- Chart -->
                    <div class="chart-container">
                        <canvas id="powerChart"></canvas>
                    </div>

                    <!-- Efficiency Indicators -->
                    <div class="efficiency-section">
                        <div class="efficiency-item">
                            <div class="efficiency-label">
                                <span>ÙƒÙØ§Ø¡Ø© Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ Ø§Ù„ÙˆÙ‚ÙˆØ¯</span>
                                <span id="fuelEfficiencyValue">75%</span>
                            </div>
                            <div class="efficiency-bar">
                                <div class="efficiency-fill" id="fuelEfficiencyBar" style="width: 75%"></div>
                            </div>
                        </div>
                        <div class="efficiency-item">
                            <div class="efficiency-label">
                                <span>Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©</span>
                                <span id="batteryUtilValue">50%</span>
                            </div>
                            <div class="efficiency-bar">
                                <div class="efficiency-fill" id="batteryUtilBar" style="width: 50%"></div>
                            </div>
                        </div>
                        <div class="efficiency-item">
                            <div class="efficiency-label">
                                <span>Ø§Ù„ÙƒÙØ§Ø¡Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ© Ù„Ù„Ù†Ø¸Ø§Ù…</span>
                                <span id="systemEfficiencyValue">82%</span>
                            </div>
                            <div class="efficiency-bar">
                                <div class="efficiency-fill" id="systemEfficiencyBar" style="width: 82%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Scenarios -->
        <div class="scenarios-section">
            <div class="card">
                <h2 class="card-title">ğŸ¯ Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª Ø³Ø±ÙŠØ¹Ø©</h2>
                <div class="scenarios-grid">
                    <button class="scenario-btn" data-scenario="port">âš“ Ø§Ù„Ù…Ù†Ø§ÙˆØ±Ø© ÙÙŠ Ø§Ù„Ù…ÙŠÙ†Ø§Ø¡</button>
                    <button class="scenario-btn" data-scenario="cruise">ğŸŒŠ Ø§Ù„Ø¥Ø¨Ø­Ø§Ø± Ø§Ù„Ø¹Ø§Ø¯ÙŠ</button>
                    <button class="scenario-btn" data-scenario="rough">â›ˆï¸ Ø·Ù‚Ø³ Ø¹Ø§ØµÙ</button>
                    <button class="scenario-btn" data-scenario="charging">ğŸ”‹ Ø´Ø­Ù† Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©</button>
                </div>
            </div>
        </div>

        <!-- Information Cards -->
        <div class="info-cards">
            <div class="info-card" onclick="toggleInfoCard(this)">
                <div class="info-card-header">
                    <h3 class="info-card-title">â„¹ï¸ Ø¹Ù† Ø§Ù„Ù†Ø¸Ø§Ù…</h3>
                    <span class="toggle-icon">â–¼</span>
                </div>
                <div class="info-card-content collapsed">
                    Ù†Ø¸Ø§Ù… ØªÙˆØ£Ù… Ø±Ù‚Ù…ÙŠ ÙŠØ¹Ù…Ù„ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù…ØµÙ…Ù… Ø®ØµÙŠØµØ§Ù‹ Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ù‡Ø¬ÙŠÙ† ÙÙŠ Ø³ÙÙ† Ro-Ro Ø§Ù„Ø¹Ø§Ù…Ù„Ø© ÙÙŠ Ø§Ù„Ø¨Ø­Ø± Ø§Ù„Ø£Ø­Ù…Ø±. ÙŠØ³ØªØ®Ø¯Ù… Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø¢Ù„ÙŠ Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¸Ø±ÙˆÙ Ø§Ù„Ø¨ÙŠØ¦ÙŠØ© ÙˆØ§Ù„ØªÙˆØµÙŠØ© Ø¨Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø£Ù…Ø«Ù„ Ù„Ù„Ø·Ø§Ù‚Ø© Ø¨ÙŠÙ† Ù…Ø­Ø±ÙƒØ§Øª Ø§Ù„Ø¯ÙŠØ²Ù„ ÙˆØ§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡.
                </div>
            </div>

            <div class="info-card" onclick="toggleInfoCard(this)">
                <div class="info-card-header">
                    <h3 class="info-card-title">ğŸ“ˆ Ø§Ù„ØªÙˆÙÙŠØ± Ø§Ù„Ù…ØªÙˆÙ‚Ø¹</h3>
                    <span class="toggle-icon">â–¼</span>
                </div>
                <div class="info-card-content collapsed">
                    <strong>ØªÙˆÙÙŠØ± Ø§Ù„ÙˆÙ‚ÙˆØ¯:</strong> 5-10% Ø³Ù†ÙˆÙŠØ§Ù‹<br>
                    <strong>ØªÙ‚Ù„ÙŠÙ„ CO2:</strong> 500 Ø·Ù†/Ø³Ù†Ø©<br>
                    <strong>Ø§Ù„ØªÙˆÙÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠ:</strong> $300,000 Ø³Ù†ÙˆÙŠØ§Ù‹<br>
                    <strong>ØªØ­Ø³ÙŠÙ† Ø§Ù„ÙƒÙØ§Ø¡Ø©:</strong> Ø²ÙŠØ§Ø¯Ø© Ø¹Ù…Ø± Ø§Ù„Ù…Ø­Ø±ÙƒØ§Øª Ø¨Ù†Ø³Ø¨Ø© 15%
                </div>
            </div>

            <div class="info-card" onclick="toggleInfoCard(this)">
                <div class="info-card-header">
                    <h3 class="info-card-title">ğŸ¯ ÙƒÙŠÙ ÙŠØ¹Ù…Ù„</h3>
                    <span class="toggle-icon">â–¼</span>
                </div>
                <div class="info-card-content collapsed">
                    <strong>1.</strong> Ø¬Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ´ØºÙŠÙ„ÙŠØ© Ø§Ù„ÙÙˆØ±ÙŠØ© (Ø§Ù„Ø³Ø±Ø¹Ø©ØŒ Ø­Ø§Ù„Ø© Ø§Ù„Ø¨Ø­Ø±ØŒ Ø§Ù„Ø­Ù…ÙˆÙ„Ø©)<br>
                    <strong>2.</strong> Ø¬Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨ÙŠØ¦ÙŠØ© (Ø§Ù„Ø±ÙŠØ§Ø­ØŒ Ø§Ù„Ø£Ù…ÙˆØ§Ø¬ØŒ Ø§Ù„ØªÙŠØ§Ø±Ø§Øª)<br>
                    <strong>3.</strong> Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø¹ØµØ¨ÙŠØ© Ø§Ù„Ù…Ø¯Ø±Ø¨Ø©<br>
                    <strong>4.</strong> Ø§Ù„ØªÙˆØµÙŠØ© Ø¨Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø£Ù…Ø«Ù„ Ù„Ø·Ø§Ù‚Ø© Ø§Ù„Ø¯ÙŠØ²Ù„ ÙˆØ§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡<br>
                    <strong>5.</strong> Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ù…Ø³ØªÙ…Ø± Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªÙˆØµÙŠØ§Øª Ø¨Ù…Ø±ÙˆØ± Ø§Ù„ÙˆÙ‚Øª
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // State
        let currentInputs = {
            speed: 17,
            seaState: 4,
            cargo: 75,
            wind: 8,
            wave: 1.5,
            battery: 50
        };

        let chart = null;

        // Sea state descriptions
        const seaStateDesc = {
            1: 'Calm',
            2: 'Light',
            3: 'Slight',
            4: 'Moderate',
            5: 'Rough',
            6: 'Very Rough',
            7: 'High'
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initializeSliders();
            initializeScenarioButtons();
            updateAllDisplayValues();
        });

        // Slider initialization
        function initializeSliders() {
            const sliders = ['speed', 'seaState', 'cargo', 'wind', 'wave', 'battery'];
            sliders.forEach(id => {
                const slider = document.getElementById(id);
                slider.addEventListener('input', function() {
                    currentInputs[id] = parseFloat(this.value);
                    updateDisplayValue(id, this.value);
                });
            });
        }

        // Update display values
        function updateDisplayValue(id, value) {
            const displays = {
                speed: `${value} Ø¹Ù‚Ø¯Ø©`,
                seaState: `${value} - ${seaStateDesc[value]}`,
                cargo: `${value}%`,
                wind: `${value} Ù…/Ø«`,
                wave: `${value} Ù…ØªØ±`,
                battery: `${value}%`
            };
            document.getElementById(id + 'Value').textContent = displays[id];
        }

        function updateAllDisplayValues() {
            Object.keys(currentInputs).forEach(key => {
                updateDisplayValue(key, currentInputs[key]);
            });
        }

        // Calculate AI Recommendation
        document.getElementById('calculateBtn').addEventListener('click', function() {
            const btn = this;
            btn.classList.add('loading');
            btn.innerHTML = 'ğŸ¤– Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­Ø³Ø§Ø¨... <span class="spinner"></span>';

            setTimeout(() => {
                const results = calculateAIRecommendation(currentInputs);
                displayResults(results);
                btn.classList.remove('loading');
                btn.innerHTML = 'ğŸ¤– Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªÙˆØµÙŠØ© Ø§Ù„Ø°ÙƒÙŠØ©';
            }, 1500);
        });

        // AI Calculation Logic
        function calculateAIRecommendation(inputs) {
            const { speed, seaState, cargo, wind, wave, battery } = inputs;

            // Calculate total required power
            let basePower = Math.pow(speed / 10, 3) * 2500;
            
            // Adjustments
            const seaStateMultiplier = 1 + (seaState - 1) * 0.05;
            const cargoMultiplier = 1 + (cargo / 100) * 0.15;
            const windResistance = wind * 50;
            const waveResistance = wave * 300;
            
            let totalPower = (basePower * seaStateMultiplier * cargoMultiplier) + windResistance + waveResistance;
            totalPower = Math.round(totalPower);

            // AI Decision Logic
            let mode, dieselRatio, electricRatio;

            if (speed < 12 && battery > 40) {
                mode = { en: 'Electric Only', ar: 'ÙƒÙ‡Ø±Ø¨Ø§Ø¡ ÙÙ‚Ø·' };
                dieselRatio = 0;
                electricRatio = 1;
            } else if (speed > 18 || battery < 30) {
                mode = { en: 'Diesel Only', ar: 'Ø¯ÙŠØ²Ù„ ÙÙ‚Ø·' };
                dieselRatio = 1;
                electricRatio = 0;
            } else if (seaState >= 5 || wave > 3) {
                mode = { en: 'Hybrid 75-25', ar: 'Ù‡Ø¬ÙŠÙ† 75-25' };
                dieselRatio = 0.75;
                electricRatio = 0.25;
            } else if (cargo >= 75 && speed >= 15) {
                mode = { en: 'Hybrid 50-50', ar: 'Ù‡Ø¬ÙŠÙ† 50-50' };
                dieselRatio = 0.5;
                electricRatio = 0.5;
            } else if (battery > 60 && seaState <= 3) {
                mode = { en: 'Hybrid 25-75', ar: 'Ù‡Ø¬ÙŠÙ† 25-75' };
                dieselRatio = 0.25;
                electricRatio = 0.75;
            } else {
                mode = { en: 'Hybrid 50-50', ar: 'Ù‡Ø¬ÙŠÙ† 50-50' };
                dieselRatio = 0.5;
                electricRatio = 0.5;
            }

            const dieselPower = Math.round(totalPower * dieselRatio);
            const electricPower = Math.round(totalPower * electricRatio);
            const fuelConsumption = (dieselPower * 0.000185).toFixed(2);

            // Calculate efficiency scores
            const maxFuel = totalPower * 0.000185;
            const fuelEfficiency = Math.round(((maxFuel - fuelConsumption) / maxFuel) * 100 + 30);
            const batteryUtilization = Math.round(electricRatio * 100);
            const systemEfficiency = Math.round((fuelEfficiency * 0.6) + (batteryUtilization * 0.4));

            return {
                mode,
                totalPower,
                dieselPower,
                electricPower,
                dieselRatio,
                electricRatio,
                fuelConsumption,
                fuelEfficiency,
                batteryUtilization,
                systemEfficiency
            };
        }

        // Display Results
        function displayResults(results) {
            const panel = document.getElementById('resultsPanel');
            panel.classList.remove('results-hidden');
            panel.classList.add('results-visible');

            // Update recommendation badge
            document.getElementById('recommendationMode').textContent = results.mode.en;
            document.getElementById('recommendationModeAr').textContent = results.mode.ar;

            // Update metrics
            document.getElementById('totalPower').textContent = `${results.totalPower.toLocaleString()} kW`;
            document.getElementById('dieselPower').textContent = `${results.dieselPower.toLocaleString()} kW`;
            document.getElementById('electricPower').textContent = `${results.electricPower.toLocaleString()} kW`;
            document.getElementById('fuelConsumption').textContent = `${results.fuelConsumption} Ø·Ù†/Ø³Ø§Ø¹Ø©`;
            document.getElementById('dieselPercent').textContent = `${Math.round(results.dieselRatio * 100)}%`;
            document.getElementById('electricPercent').textContent = `${Math.round(results.electricRatio * 100)}%`;

            // Update efficiency bars
            updateEfficiencyBar('fuelEfficiency', results.fuelEfficiency);
            updateEfficiencyBar('batteryUtil', results.batteryUtilization);
            updateEfficiencyBar('systemEfficiency', results.systemEfficiency);

            // Update chart
            updateChart(results);
        }

        function updateEfficiencyBar(id, value) {
            document.getElementById(id + 'Value').textContent = `${value}%`;
            document.getElementById(id + 'Bar').style.width = `${value}%`;
        }

        // Chart Update
        function updateChart(results) {
            const ctx = document.getElementById('powerChart').getContext('2d');
            
            if (chart) {
                chart.destroy();
            }

            chart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Ø§Ù„Ø¯ÙŠØ²Ù„ (Diesel)', 'Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡ (Electric)'],
                    datasets: [{
                        data: [results.dieselPower, results.electricPower],
                        backgroundColor: ['#f59e0b', '#38bdf8'],
                        borderColor: ['#d97706', '#0284c7'],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: '#f1f5f9',
                                font: {
                                    size: 14
                                },
                                padding: 20
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.parsed || 0;
                                    const percentage = Math.round((value / results.totalPower) * 100);
                                    return `${label}: ${value.toLocaleString()} kW (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });
        }

        // Scenario Buttons
        function initializeScenarioButtons() {
            const scenarios = {
                port: { speed: 10, seaState: 2, cargo: 50, wind: 5, wave: 0.5, battery: 70 },
                cruise: { speed: 17, seaState: 3, cargo: 75, wind: 8, wave: 1.5, battery: 50 },
                rough: { speed: 14, seaState: 6, cargo: 100, wind: 18, wave: 4, battery: 40 },
                charging: { speed: 16, seaState: 3, cargo: 50, wind: 6, wave: 1.0, battery: 25 }
            };

            document.querySelectorAll('.scenario-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const scenario = scenarios[this.dataset.scenario];
                    applyScenario(scenario);
                });
            });
        }

        function applyScenario(scenario) {
            currentInputs = { ...scenario };
            
            // Update sliders
            Object.keys(scenario).forEach(key => {
                document.getElementById(key).value = scenario[key];
            });
            
            updateAllDisplayValues();
            
            // Auto-calculate
            setTimeout(() => {
                document.getElementById('calculateBtn').click();
            }, 300);
        }

        // Info Card Toggle
        function toggleInfoCard(card) {
            const content = card.querySelector('.info-card-content');
            const icon = card.querySelector('.toggle-icon');
            
            content.classList.toggle('collapsed');
            icon.classList.toggle('expanded');
        }
    </script>
</body>
</html>